---
name: story-consistency-monitor
description: "Use during chapter writing to automatically check character behavior, world rules, and timeline consistency - alerts when detecting potential contradictions before they become major issues"
allowed-tools: Read, Grep
---

# 故事一致性监控

## 自动检查系统

### 本技能监控什么

#### 角色一致性

- **物理特征**：眼睛颜色、身高、年龄、疤痕
- **性格**：行动符合已建立的角色
- **知识**：角色只知道他们应该知道的
- **成长**：变化与角色弧线一致

#### 世界规则

- **魔法/科技系统**：力量的使用一致
- **地理**：距离和地点保持稳定
- **社会规则**：文化和习俗不矛盾
- **物理法则**：已建立的规则不随机打破

#### 时间线逻辑

- **事件顺序**：A 在逻辑上发生在 B 之前
- **时间流逝**：角色适当地老化
- **同时事件**：多 POV 时间线对齐
- **历史一致性**：过去的引用保持一致

### 如何工作

**被动监控**：当你写作或讨论故事时，我会自动交叉参考：
1. `characters/` 目录中的角色档案
2. `worldbuilding/` 目录中的世界构建文档
3. `spec/tracking/timeline.json` 中的时间线数据
4. 之前章节的内容

**不需要你采取任何行动** - 监控在后台进行。

## 当检测到问题时

### 警报格式

当我检测到潜在不一致时，我会用以下方式提醒你：

**⚠️ 一致性检查警报**

```
问题：角色特征不匹配
位置：当前章节，第3段
参考：characters/mary-chen.md，第15行

当前文本："玛丽的绿色眼睛眯起..."
已建立特征："眼睛颜色：蓝色"（在第3章中设定）

可能的解决方案：
1. 将当前文本改为"蓝色眼睛"
2. 如果你要修改设定，更新角色档案
3. 这是一个有相似名字的不同角色？

你想让我自动修复这个，还是你更愿意自己处理？
```

### 严重程度级别

| 级别 | 图标 | 行动 | 示例 |
|------|------|------|------|
| **关键** | 🔴 | 立即停止并修复 | 角色突然知道他们不应该知道的秘密信息 |
| **警告** | ⚠️ | 尽快修复 | 角色的惯常言语模式改变了 |
| **注意** | 📝 | 考虑检查 | 时间线感觉压缩 |

## 与 Novel-Writer 命令集成

### 在 `/write` 期间

- 在生成内容时进行实时一致性检查
- 对关键问题的即时警报
- 自动参考规格文档

### 在 `/analyze` 期间

- 全面的一致性报告
- 所有累积的警告和注意事项
- 建议的修复按严重性排序

### 在 `/track` 期间

- 使用经过验证的信息更新追踪数据
- 标记不一致以供手动审查
- 维护一致性历史

## 配置

### 严格程度级别

你可以调整一致性检查的严格程度：

**严格模式**（非奇幻的默认）：
- 标记所有矛盾
- 执行真实世界物理
- 时间线必须完全合乎逻辑

**灵活模式**（推荐用于奇幻/科幻）：
- 允许"酷炫规则"例外
- 魔法/科技可以弯曲现实
- 允许艺术许可，但会通知

**最小模式**：
- 只标记关键矛盾
- 专注于角色和主要情节点
- 让小的不一致通过

### 禁用特定检查

如果某些不一致是有意的：
```
"请为梦境序列禁用时间线检查 - 
它们有意是非线性的。"
```

## 常见误报

有时我会标记实际上正确的东西：

### 有意的矛盾

**示例**：角色谎报眼睛颜色
**修复**：在角色档案中添加评论："// 眼睛实际上是蓝色的，告诉人们是绿色的"

### 不可靠的叙述者

**示例**：第一人称叙述者记错事件
**修复**：在宪法中注明："不可靠的叙述者 - 记忆不一致是有意的"

### 时间跳跃

**示例**：角色的年龄突然增加
**修复**：在章节中明确说明时间跳跃："三年后..."

## 最佳实践

### 保持参考文档更新

一致性检查器只能和你的文档一样好：
- 特征变化时更新角色档案
- 清楚地记录世界规则
- 使用 `/timeline` 命令维护时间线文件

### 及时处理警报

不要让一致性问题累积：
- 立即修复关键警报
- 在写作会话结束时审查警告
- 在修订阶段批处理注意事项

### 与 `/track` 一起使用

一致性检查 + 追踪系统 = 强大组合：
- `/track --check` 运行深度一致性验证
- `/track --fix` 可以自动修复简单问题
- 定期使用两者（每 5-10 章）

## 检查类别详解

### 角色一致性检查

**物理描述**：
```
✓ 检查：身高、体重、年龄、发色、眼色
✓ 检查：疤痕、纹身、独特标记
✓ 检查：服装风格、配饰
```

**行为模式**：
```
✓ 检查：言语模式是否一致
✓ 检查：反应是否符合性格
✓ 检查：决策是否符合价值观
✓ 检查：技能/能力是否一致
```

**知识状态**：
```
✓ 检查：角色知道什么时候知道的
✓ 检查：他们不知道不应该知道的秘密
✓ 检查：记忆与已建立事实一致
```

### 世界规则检查

**魔法/科技系统**：
```
✓ 检查：力量在已建立限制内使用
✓ 检查：代价/成本一致应用
✓ 检查：规则不为了情节便利而改变
✓ 检查：例外有前期暗示
```

**地理和距离**：
```
✓ 检查：地点在地图上保持一致
✓ 检查：旅行时间合理
✓ 检查：气候与地理匹配
✓ 检查：地标不移动
```

**社会和文化**：
```
✓ 检查：文化规范一致
✓ 检查：语言和方言保持稳定
✓ 检查：社会结构不随机改变
✓ 检查：宗教/信仰保持一致
```

### 时间线检查

**事件序列**：
```
✓ 检查：原因发生在结果之前
✓ 检查：角色不在他们不能在的地方
✓ 检查：事件在合理的时间范围内发生
```

**时间流逝**：
```
✓ 检查：角色适当地老化
✓ 检查：季节按顺序改变
✓ 检查：怀孕/康复需要适当的时间
✓ 检查：技能习得需要练习时间
```

**多POV同步**：
```
✓ 检查：同时事件从不同POV匹配
✓ 检查：时间跳跃在POV之间对齐
✓ 检查：没有POV知道其他POV的未来
```

## 自动修复功能

对于某些简单问题，我可以提供自动修复：

### 自动修复类型

**拼写变化**：
```
检测：角色名字拼写不一致
建议：标准化为最常见的拼写
行动：全局查找并替换（经你批准）
```

**数字不一致**：
```
检测：角色年龄在章节间不匹配
建议：基于时间线计算正确年龄
行动：更新到正确数字
```

**时间线冲突**：
```
检测：事件日期与已建立时间线冲突
建议：调整日期以适应已知序列
行动：更新时间线参考
```

## 报告和追踪

### 一致性报告

定期（或根据要求），我会生成：

```markdown
## 一致性报告 - [日期]

### 章节范围：章节 1-15

### 检测到的问题

#### 关键（必须修复）
1. 第12章：角色知道只在第14章揭示的信息
   - 修复：重写第12章场景或移动第14章揭示更早

#### 警告（应该修复）
1. 第8章：角色的眼睛颜色从蓝色变为绿色
   - 修复建议：将第8章更新为蓝色或更新角色档案
   
2. 第10章：从首都到边境的旅行只用了1天（之前建立为3天）
   - 修复建议：添加时间跳跃或调整天数

#### 注意事项（考虑检查）
1. 第5章：角色反应似乎不符合特征
   - 审查：这是有意的成长还是不一致？

### 统计
- 总检查：456
- 问题发现：8
- 自动修复：3
- 需要审查：5

### 一致性得分：94%
```

### 追踪历史

我维护发现和修复的一致性问题的历史：
- 有助于识别模式
- 防止重复错误
- 显示随时间的改进
- 对修订有用

## 与其他技能协作

### 配合 Writing Techniques Skills

**对话一致性**：
- 检查角色声音是否保持
- 验证言语模式
- 标记不符合特征的对话

**场景一致性**：
- 验证设定细节
- 检查物理可能性
- 确认时间流逝

### 配合 Genre Knowledge Skills

**类型惯例一致性**：
- 确保类型规则应用一致
- 检查陷阱是否一致避免
- 验证节奏模式

---

**记住**：一致性不是关于完美 - 它是关于读者的信任。当世界规则可靠时，读者沉浸其中。当规则似乎随意改变时，他们被拉出体验。我在这里帮助维持这种信任。

**你总是有最后的决定权** - 如果不一致是艺术选择，告诉我，我会停止标记它。

